"use strict";(self.webpackChunkmidjourney_proxy_admin=self.webpackChunkmidjourney_proxy_admin||[]).push([[366],{42110:function($,x){var n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"};x.Z=n},94149:function($,x,n){n.d(x,{Z:function(){return I}});var j=n(1413),p=n(67294),L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},Z=L,B=n(91146),C=function(y,O){return p.createElement(B.Z,(0,j.Z)((0,j.Z)({},y),{},{ref:O,icon:Z}))},N=p.forwardRef(C),I=N},57941:function($,x,n){n.r(x),n.d(x,{default:function(){return xe}});var j=n(15009),p=n.n(j),L=n(97857),Z=n.n(L),B=n(99289),C=n.n(B),N=n(66927),I=n(94149),l=n(1413),y=n(91),O=n(10915),Q=n(28459),X=n(93967),Y=n.n(X),R=n(67294),q=n(34994),z=n(4942),_=n(98082),ee=function(t){return(0,z.Z)((0,z.Z)({},t.componentCls,{"&-container":{display:"flex",flex:"1",flexDirection:"column",height:"100%",paddingInline:32,paddingBlock:24,overflow:"auto",background:"inherit"},"&-top":{textAlign:"center"},"&-header":{display:"flex",alignItems:"center",justifyContent:"center",height:"44px",lineHeight:"44px",a:{textDecoration:"none"}},"&-title":{position:"relative",insetBlockStart:"2px",color:"@heading-color",fontWeight:"600",fontSize:"33px"},"&-logo":{width:"44px",height:"44px",marginInlineEnd:"16px",verticalAlign:"top",img:{width:"100%"}},"&-desc":{marginBlockStart:"12px",marginBlockEnd:"40px",color:t.colorTextSecondary,fontSize:t.fontSize},"&-main":{minWidth:"328px",maxWidth:"580px",margin:"0 auto","&-other":{marginBlockStart:"24px",lineHeight:"22px",textAlign:"start"}}}),"@media (min-width: @screen-md-min)",(0,z.Z)({},"".concat(t.componentCls,"-container"),{paddingInline:0,paddingBlockStart:32,paddingBlockEnd:24,backgroundRepeat:"no-repeat",backgroundPosition:"center 110px",backgroundSize:"100%"}))};function ne(o){return(0,_.Xj)("LoginForm",function(t){var e=(0,l.Z)((0,l.Z)({},t),{},{componentCls:".".concat(o)});return[ee(e)]})}var a=n(85893),te=["logo","message","contentStyle","title","subTitle","actions","children","containerStyle","otherStyle"];function re(o){var t,e=o.logo,c=o.message,s=o.contentStyle,f=o.title,h=o.subTitle,v=o.actions,d=o.children,g=o.containerStyle,u=o.otherStyle,r=(0,y.Z)(o,te),P=(0,O.YB)(),F=r.submitter===!1?!1:(0,l.Z)((0,l.Z)({searchConfig:{submitText:P.getMessage("loginForm.submitText","\u767B\u5F55")}},r.submitter),{},{submitButtonProps:(0,l.Z)({size:"large",style:{width:"100%"}},(t=r.submitter)===null||t===void 0?void 0:t.submitButtonProps),render:function(k,K){var D,Pe=K.pop();if(typeof(r==null||(D=r.submitter)===null||D===void 0?void 0:D.render)=="function"){var M,E;return r==null||(M=r.submitter)===null||M===void 0||(E=M.render)===null||E===void 0?void 0:E.call(M,k,K)}return Pe}}),J=(0,R.useContext)(Q.ZP.ConfigContext),i=J.getPrefixCls("pro-form-login"),A=ne(i),ye=A.wrapSSR,b=A.hashId,m=function(k){return"".concat(i,"-").concat(k," ").concat(b)},U=(0,R.useMemo)(function(){return e?typeof e=="string"?(0,a.jsx)("img",{src:e}):e:null},[e]);return ye((0,a.jsxs)("div",{className:Y()(m("container"),b),style:g,children:[(0,a.jsxs)("div",{className:"".concat(m("top")," ").concat(b).trim(),children:[f||U?(0,a.jsxs)("div",{className:"".concat(m("header")),children:[U?(0,a.jsx)("span",{className:m("logo"),children:U}):null,f?(0,a.jsx)("span",{className:m("title"),children:f}):null]}):null,h?(0,a.jsx)("div",{className:m("desc"),children:h}):null]}),(0,a.jsxs)("div",{className:m("main"),style:(0,l.Z)({width:328},s),children:[(0,a.jsxs)(q.A,(0,l.Z)((0,l.Z)({isKeyPressSubmit:!0},r),{},{submitter:F,children:[c,d]})),v?(0,a.jsx)("div",{className:m("main-other"),style:u,children:v}):null]})]}))}var w=n(97685),ae=n(21770),oe=n(53025),ie=n(55241),le=n(97435),H=n(78886),se=["fieldProps","proFieldProps"],de=["fieldProps","proFieldProps"],T="text",ue=function(t){var e=t.fieldProps,c=t.proFieldProps,s=(0,y.Z)(t,se);return(0,a.jsx)(H.Z,(0,l.Z)({valueType:T,fieldProps:e,filedConfig:{valueType:T},proFieldProps:c},s))},ce=function(t){var e=(0,ae.Z)(t.open||!1,{value:t.open,onChange:t.onOpenChange}),c=(0,w.Z)(e,2),s=c[0],f=c[1];return(0,a.jsx)(oe.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(v){var d,g=v.getFieldValue(t.name||[]);return(0,a.jsx)(ie.Z,(0,l.Z)((0,l.Z)({getPopupContainer:function(r){return r&&r.parentNode?r.parentNode:r},onOpenChange:function(r){return f(r)},content:(0,a.jsxs)("div",{style:{padding:"4px 0"},children:[(d=t.statusRender)===null||d===void 0?void 0:d.call(t,g),t.strengthText?(0,a.jsx)("div",{style:{marginTop:10},children:(0,a.jsx)("span",{children:t.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},t.popoverProps),{},{open:s,children:t.children}))}})},ve=function(t){var e=t.fieldProps,c=t.proFieldProps,s=(0,y.Z)(t,de),f=(0,R.useState)(!1),h=(0,w.Z)(f,2),v=h[0],d=h[1];return e!=null&&e.statusRender&&s.name?(0,a.jsx)(ce,{name:s.name,statusRender:e==null?void 0:e.statusRender,popoverProps:e==null?void 0:e.popoverProps,strengthText:e==null?void 0:e.strengthText,open:v,onOpenChange:d,children:(0,a.jsx)("div",{children:(0,a.jsx)(H.Z,(0,l.Z)({valueType:"password",fieldProps:(0,l.Z)((0,l.Z)({},(0,le.Z)(e,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(u){var r;e==null||(r=e.onBlur)===null||r===void 0||r.call(e,u),d(!1)},onClick:function(u){var r;e==null||(r=e.onClick)===null||r===void 0||r.call(e,u),d(!0)}}),proFieldProps:c,filedConfig:{valueType:T}},s))})}):(0,a.jsx)(H.Z,(0,l.Z)({valueType:"password",fieldProps:e,proFieldProps:c,filedConfig:{valueType:T}},s))},W=ue;W.Password=ve,W.displayName="ProFormComponent";var ge=W,G=n(24556),S=n(80854),V=n(2453),fe=n(73935),he=n(67610),me=function(){var t=(0,G.l)(function(e){var c=e.token;return{width:42,height:42,lineHeight:"42px",position:"fixed",right:16,borderRadius:c.borderRadius,":hover":{backgroundColor:c.colorBgTextHover}}});return(0,a.jsx)("div",{className:t,"data-lang":!0,children:S.SelectLang&&(0,a.jsx)(S.SelectLang,{})})},pe=function(){var t=(0,S.useModel)("@@initialState"),e=t.initialState,c=t.setInitialState,s=(0,S.useIntl)(),f=(0,G.l)(function(){return{display:"flex",flexDirection:"column",height:"100vh",overflow:"auto",backgroundImage:"url('https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/V-_oS6r-i7wAAAAAAAAAAAAAFl94AQBr')",backgroundSize:"100% 100%"}}),h=function(){var v=C()(p()().mark(function d(g){var u,r,P,F;return p()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,(0,N.x4)(JSON.stringify(g.password||""));case 3:if(u=i.sent,u.code!==1){i.next=12;break}return u&&u.apiSecret&&sessionStorage.setItem("mj-api-secret",u.apiSecret),V.ZP.success(s.formatMessage({id:"pages.login.success"})),i.next=9,e==null||(r=e.fetchUserInfo)===null||r===void 0?void 0:r.call(e);case 9:return P=i.sent,P&&((0,fe.flushSync)(function(){c(function(A){return Z()(Z()({},A),{},{currentUser:P})})}),location.hash="#/welcome"),i.abrupt("return");case 12:V.ZP.error(u.description),i.next=19;break;case 15:i.prev=15,i.t0=i.catch(0),F=s.formatMessage({id:"pages.login.failure"}),V.ZP.error(F);case 19:case"end":return i.stop()}},d,null,[[0,15]])}));return function(g){return v.apply(this,arguments)}}();return(0,a.jsxs)("div",{className:f,children:[(0,a.jsx)(S.Helmet,{children:(0,a.jsxs)("title",{children:[s.formatMessage({id:"menu.login"})," - ",he.Z.title]})}),(0,a.jsx)(me,{}),(0,a.jsx)("div",{style:{flex:"1",padding:"32px 0"},children:(0,a.jsx)(re,{contentStyle:{minWidth:280,maxWidth:"75vw"},title:"Midjourney Proxy Admin",subTitle:s.formatMessage({id:"pages.layouts.userLayout.title"}),initialValues:{autoLogin:!0},onFinish:function(){var v=C()(p()().mark(function d(g){return p()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,h(g);case 2:case"end":return r.stop()}},d)}));return function(d){return v.apply(this,arguments)}}(),children:(0,a.jsx)(ge.Password,{name:"password",fieldProps:{size:"large",prefix:(0,a.jsx)(I.Z,{})},placeholder:s.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"Admin Token"})})})})]})},xe=pe}}]);
