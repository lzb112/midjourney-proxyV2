"use strict";(self.webpackChunkmidjourney_proxy_admin=self.webpackChunkmidjourney_proxy_admin||[]).push([[366],{42110:function(w,S){var t={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"};S.Z=t},58963:function(w,S,t){t.r(S),t.d(S,{default:function(){return Ze}});var D=t(15009),P=t.n(D),E=t(97857),H=t.n(E),$=t(99289),W=t.n($),G=t(66927),o=t(1413),p=t(67294),J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},K=J,Q=t(91146),X=function(n,e){return p.createElement(Q.Z,(0,o.Z)((0,o.Z)({},n),{},{ref:e,icon:K}))},Y=p.forwardRef(X),q=Y,F=t(91),_=t(10915),ee=t(28459),ne=t(93967),te=t.n(ne),re=t(34994),A=t(4942),ae=t(98082),ie=function(n){return(0,A.Z)((0,A.Z)({},n.componentCls,{"&-container":{display:"flex",flex:"1",flexDirection:"column",height:"100%",paddingInline:32,paddingBlock:24,overflow:"auto",background:"inherit"},"&-top":{textAlign:"center"},"&-header":{display:"flex",alignItems:"center",justifyContent:"center",height:"44px",lineHeight:"44px",a:{textDecoration:"none"}},"&-title":{position:"relative",insetBlockStart:"2px",color:"@heading-color",fontWeight:"600",fontSize:"33px"},"&-logo":{width:"44px",height:"44px",marginInlineEnd:"16px",verticalAlign:"top",img:{width:"100%"}},"&-desc":{marginBlockStart:"12px",marginBlockEnd:"40px",color:n.colorTextSecondary,fontSize:n.fontSize},"&-main":{minWidth:"328px",maxWidth:"580px",margin:"0 auto","&-other":{marginBlockStart:"24px",lineHeight:"22px",textAlign:"start"}}}),"@media (min-width: @screen-md-min)",(0,A.Z)({},"".concat(n.componentCls,"-container"),{paddingInline:0,paddingBlockStart:32,paddingBlockEnd:24,backgroundRepeat:"no-repeat",backgroundPosition:"center 110px",backgroundSize:"100%"}))};function oe(i){return(0,ae.Xj)("LoginForm",function(n){var e=(0,o.Z)((0,o.Z)({},n),{},{componentCls:".".concat(i)});return[ie(e)]})}var a=t(85893),le=["logo","message","contentStyle","title","subTitle","actions","children","containerStyle","otherStyle"];function se(i){var n,e=i.logo,c=i.message,s=i.contentStyle,h=i.title,f=i.subTitle,v=i.actions,d=i.children,g=i.containerStyle,u=i.otherStyle,r=(0,F.Z)(i,le),y=(0,_.YB)(),Z=r.submitter===!1?!1:(0,o.Z)((0,o.Z)({searchConfig:{submitText:y.getMessage("loginForm.submitText","\u767B\u5F55")}},r.submitter),{},{submitButtonProps:(0,o.Z)({size:"large",style:{width:"100%"}},(n=r.submitter)===null||n===void 0?void 0:n.submitButtonProps),render:function(R,U){var O,Fe=U.pop();if(typeof(r==null||(O=r.submitter)===null||O===void 0?void 0:O.render)=="function"){var T,z;return r==null||(T=r.submitter)===null||T===void 0||(z=T.render)===null||z===void 0?void 0:z.call(T,R,U)}return Fe}}),k=(0,p.useContext)(ee.ZP.ConfigContext),l=k.getPrefixCls("pro-form-login"),C=oe(l),Ce=C.wrapSSR,N=C.hashId,m=function(R){return"".concat(l,"-").concat(R," ").concat(N)},I=(0,p.useMemo)(function(){return e?typeof e=="string"?(0,a.jsx)("img",{src:e}):e:null},[e]);return Ce((0,a.jsxs)("div",{className:te()(m("container"),N),style:g,children:[(0,a.jsxs)("div",{className:"".concat(m("top")," ").concat(N).trim(),children:[h||I?(0,a.jsxs)("div",{className:"".concat(m("header")),children:[I?(0,a.jsx)("span",{className:m("logo"),children:I}):null,h?(0,a.jsx)("span",{className:m("title"),children:h}):null]}):null,f?(0,a.jsx)("div",{className:m("desc"),children:f}):null]}),(0,a.jsxs)("div",{className:m("main"),style:(0,o.Z)({width:328},s),children:[(0,a.jsxs)(re.A,(0,o.Z)((0,o.Z)({isKeyPressSubmit:!0},r),{},{submitter:Z,children:[c,d]})),v?(0,a.jsx)("div",{className:m("main-other"),style:u,children:v}):null]})]}))}var V=t(97685),de=t(21770),ue=t(53025),ce=t(55241),ve=t(97435),M=t(78886),ge=["fieldProps","proFieldProps"],he=["fieldProps","proFieldProps"],j="text",fe=function(n){var e=n.fieldProps,c=n.proFieldProps,s=(0,F.Z)(n,ge);return(0,a.jsx)(M.Z,(0,o.Z)({valueType:j,fieldProps:e,filedConfig:{valueType:j},proFieldProps:c},s))},me=function(n){var e=(0,de.Z)(n.open||!1,{value:n.open,onChange:n.onOpenChange}),c=(0,V.Z)(e,2),s=c[0],h=c[1];return(0,a.jsx)(ue.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(v){var d,g=v.getFieldValue(n.name||[]);return(0,a.jsx)(ce.Z,(0,o.Z)((0,o.Z)({getPopupContainer:function(r){return r&&r.parentNode?r.parentNode:r},onOpenChange:function(r){return h(r)},content:(0,a.jsxs)("div",{style:{padding:"4px 0"},children:[(d=n.statusRender)===null||d===void 0?void 0:d.call(n,g),n.strengthText?(0,a.jsx)("div",{style:{marginTop:10},children:(0,a.jsx)("span",{children:n.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},n.popoverProps),{},{open:s,children:n.children}))}})},pe=function(n){var e=n.fieldProps,c=n.proFieldProps,s=(0,F.Z)(n,he),h=(0,p.useState)(!1),f=(0,V.Z)(h,2),v=f[0],d=f[1];return e!=null&&e.statusRender&&s.name?(0,a.jsx)(me,{name:s.name,statusRender:e==null?void 0:e.statusRender,popoverProps:e==null?void 0:e.popoverProps,strengthText:e==null?void 0:e.strengthText,open:v,onOpenChange:d,children:(0,a.jsx)("div",{children:(0,a.jsx)(M.Z,(0,o.Z)({valueType:"password",fieldProps:(0,o.Z)((0,o.Z)({},(0,ve.Z)(e,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(u){var r;e==null||(r=e.onBlur)===null||r===void 0||r.call(e,u),d(!1)},onClick:function(u){var r;e==null||(r=e.onClick)===null||r===void 0||r.call(e,u),d(!0)}}),proFieldProps:c,filedConfig:{valueType:j}},s))})}):(0,a.jsx)(M.Z,(0,o.Z)({valueType:"password",fieldProps:e,proFieldProps:c,filedConfig:{valueType:j}},s))},L=fe;L.Password=pe,L.displayName="ProFormComponent";var xe=L,b=t(24556),x=t(80854),B=t(2453),ye=t(73935),Se=t(67610),Pe=function(){var n=(0,b.l)(function(e){var c=e.token;return{width:42,height:42,lineHeight:"42px",position:"fixed",right:16,borderRadius:c.borderRadius,":hover":{backgroundColor:c.colorBgTextHover}}});return(0,a.jsx)("div",{className:n,"data-lang":!0,children:x.SelectLang&&(0,a.jsx)(x.SelectLang,{})})},je=function(){var n=(0,x.useModel)("@@initialState"),e=n.initialState,c=n.setInitialState,s=(0,x.useIntl)(),h=(0,b.l)(function(){return{display:"flex",flexDirection:"column",height:"100vh",overflow:"auto",backgroundImage:"url('https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/V-_oS6r-i7wAAAAAAAAAAAAAFl94AQBr')",backgroundSize:"100% 100%"}}),f=function(){var v=W()(P()().mark(function d(g){var u,r,y,Z;return P()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,(0,G.x4)(JSON.stringify(g.password||""));case 3:if(u=l.sent,u.code!==1){l.next=12;break}return u&&u.apiSecret&&sessionStorage.setItem("mj-api-secret",u.apiSecret),B.ZP.success(s.formatMessage({id:"pages.login.success"})),l.next=9,e==null||(r=e.fetchUserInfo)===null||r===void 0?void 0:r.call(e);case 9:return y=l.sent,y&&((0,ye.flushSync)(function(){c(function(C){return H()(H()({},C),{},{currentUser:y})})}),location.hash="#/welcome"),l.abrupt("return");case 12:B.ZP.error(u.description),l.next=19;break;case 15:l.prev=15,l.t0=l.catch(0),Z=s.formatMessage({id:"pages.login.failure"}),B.ZP.error(Z);case 19:case"end":return l.stop()}},d,null,[[0,15]])}));return function(g){return v.apply(this,arguments)}}();return(0,a.jsxs)("div",{className:h,children:[(0,a.jsx)(x.Helmet,{children:(0,a.jsxs)("title",{children:[s.formatMessage({id:"menu.login"})," - ",Se.Z.title]})}),(0,a.jsx)(Pe,{}),(0,a.jsx)("div",{style:{flex:"1",padding:"32px 0"},children:(0,a.jsx)(se,{contentStyle:{minWidth:280,maxWidth:"75vw"},title:"Midjourney Proxy Admin",subTitle:s.formatMessage({id:"pages.layouts.userLayout.title"}),initialValues:{autoLogin:!0},onFinish:function(){var v=W()(P()().mark(function d(g){return P()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,f(g);case 2:case"end":return r.stop()}},d)}));return function(d){return v.apply(this,arguments)}}(),children:(0,a.jsx)(xe.Password,{name:"password",fieldProps:{size:"large",prefix:(0,a.jsx)(q,{})},placeholder:s.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"Admin Token"})})})})]})},Ze=je}}]);
