"use strict";(self.webpackChunkmidjourney_proxy_admin=self.webpackChunkmidjourney_proxy_admin||[]).push([[903],{39936:function(Mr,fe,i){i.r(fe),i.d(fe,{default:function(){return Sa}});var qe=i(97857),k=i.n(qe),_e=i(15009),T=i.n(_e),ea=i(64599),$=i.n(ea),aa=i(19632),ra=i.n(aa),ta=i(99289),J=i.n(ta),sa=i(5574),v=i.n(sa),I=i(66927),na=i(18429),ia=i(51042),pe=i(52645),la=i(90930),oa=i(80854),z=i(55102),K=i(4393),ua=i(16568),j=i(2453),M=i(14726),da=i(7134),N=i(86250),L=i(42075),ca=i(66309),fa=i(11499),pa=i(74330),ga=i(38703),V=i(66476),ge=i(78045),me=i(74656),ma=i(28248),g=i(67294),ve=i(37823),se={cardTitleTime:"cardTitleTime___ULudn",taskErrorTip:"taskErrorTip___EJ9yV"},a=i(85893),he=z.Z.TextArea,va=K.Z.Meta,ha=function(){var ya=ua.ZP.useNotification(),Se=v()(ya,2),U=Se[0],Ca=Se[1],ba=(0,g.useState)([]),ye=v()(ba,2),Ta=ye[0],Ce=ye[1],ja=(0,g.useState)(!1),be=v()(ja,2),Ia=be[0],Te=be[1],wa=(0,g.useState)("imagine"),je=v()(wa,2),C=je[0],xa=je[1],Za=(0,g.useState)("MID_JOURNEY"),Ie=v()(Za,2),R=Ie[0],Pa=Ie[1],Ma=(0,g.useState)(""),we=v()(Ma,2),Z=we[0],O=we[1],Aa=(0,g.useState)("SQUARE"),xe=v()(Aa,2),Ze=xe[0],Ea=xe[1],Ra=(0,g.useState)([]),Pe=v()(Ra,2),w=Pe[0],F=Pe[1],ka=(0,g.useState)(""),Me=v()(ka,2),Fa=Me[0],Ae=Me[1],Ba=(0,g.useState)(!1),Ee=v()(Ba,2),D=Ee[0],P=Ee[1],Na=(0,g.useState)(new Set),La=v()(Na,1),b=La[0],Ua=(0,g.useState)(!1),Re=v()(Ua,2),Oa=Re[0],H=Re[1],Da=(0,g.useState)(""),ke=v()(Da,2),Ja=ke[0],Ha=ke[1],Ga=(0,g.useState)(""),Fe=v()(Ga,2),q=Fe[0],Be=Fe[1],Ya=(0,g.useState)(""),Ne=v()(Ya,2),ne=Ne[0],$a=Ne[1],za=(0,g.useState)(""),Le=v()(za,2),_=Le[0],Ue=Le[1],Va=(0,g.useState)(0),Oe=v()(Va,2),De=Oe[0],Wa=Oe[1],Xa=(0,g.useState)(!1),Je=v()(Xa,2),Qa=Je[0],Ka=Je[1],qa=(0,g.useState)(!1),He=v()(qa,2),_a=He[0],Ge=He[1],er=(0,g.useState)([]),Ye=v()(er,2),ar=Ye[0],rr=Ye[1],tr=(0,g.useState)(),$e=v()(tr,2),G=$e[0],sr=$e[1],u=(0,oa.useIntl)(),ie=(0,g.useRef)([]),Y=(0,g.useRef)(null),B="midjourney-proxy-admin",ze=sessionStorage.getItem("mj-image-prefix")||"";(0,g.useEffect)(function(){return lr({state:B,pageNumber:0,pageSize:3,statusSet:["NOT_START","SUBMITTED","IN_PROGRESS","FAILURE","SUCCESS"],sort:"submitTime,desc"}),Y.current&&clearInterval(Y.current),Y.current=setInterval(function(){b.size!==0&&nr()},2e3),function(){Y.current&&(clearInterval(Y.current),Y.current=null)}},[]);var nr=function(){var n=J()(T()().mark(function e(){var r,o,l,c,s,f,d,x,p,h,y;return T()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return r=Array.from(b),o=new Set(r),S.next=4,(0,I.BX)(r);case 4:l=S.sent,c=!1,s=ra()(ie.current),f=$()(l),S.prev=8,x=T()().mark(function te(){var t,m;return T()().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:t=d.value,o.delete(t.id),(t.status==="FAILURE"||t.status==="SUCCESS"||t.status==="CANCEL")&&b.delete(t.id),m=s.find(function(Pr){return Pr.id===t.id}),m?ir(m,t)||(c=!0,s.splice(s.indexOf(m),1,t)):(c=!0,s.push(t));case 5:case"end":return ce.stop()}},te)}),f.s();case 11:if((d=f.n()).done){S.next=15;break}return S.delegateYield(x(),"t0",13);case 13:S.next=11;break;case 15:S.next=20;break;case 17:S.prev=17,S.t1=S.catch(8),f.e(S.t1);case 20:return S.prev=20,f.f(),S.finish(20);case 23:p=$()(o);try{for(p.s();!(h=p.n()).done;)y=h.value,b.delete(y)}catch(te){p.e(te)}finally{p.f()}c&&(ie.current=s,Ce(s),Ve());case 26:case"end":return S.stop()}},e,null,[[8,17,20,23]])}));return function(){return n.apply(this,arguments)}}(),ir=function(e,r){return e.status===r.status&&e.progress===r.progress&&e.imageUrl===r.imageUrl},Ve=function(){setTimeout(function(){var e=document.getElementById("task-panel");e&&e.scrollTo(0,e.scrollHeight)},20)},lr=function(){var n=J()(T()().mark(function e(r){var o,l,c,s,f,d;return T()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return Te(!0),p.next=3,(0,I.Ed)();case 3:return o=p.sent,rr(o),p.next=7,(0,I.Pn)(r);case 7:l=p.sent,c=l.list.reverse(),s=$()(c);try{for(s.s();!(f=s.n()).done;)d=f.value,d.status!=="FAILURE"&&d.status!=="SUCCESS"&&d.action!=="CANCEL"&&b.add(d.id)}catch(h){s.e(h)}finally{s.f()}ie.current=c,Ce(c),Te(!1),Ve();case 15:case"end":return p.stop()}},e)}));return function(r){return n.apply(this,arguments)}}(),or=function(e){xa(e),O(""),F([])},ur=function(e){sr(e)},dr=function(e){var r=e.target.value;Pa(r),O(""),F([])},cr=function(e){var r=e.target.value;Ea(r)},ee=function(e){O(e.target.value)},We=function(e){Be(e.target.value)},W=function(){var n=J()(T()().mark(function e(r){return T()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,new Promise(function(c){var s=new FileReader;s.onload=function(){return c(s.result)},s.readAsDataURL(r)});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},e)}));return function(r){return n.apply(this,arguments)}}(),A=function(){var n=J()(T()().mark(function e(){var r,o,l,c,s,f,d,x,p,h,y,Q,S;return T()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(R!=="INSIGHT_FACE"){t.next=14;break}if(!(w.length<2)){t.next=4;break}return j.ZP.error(u.formatMessage({id:"pages.draw.swapTip"})),t.abrupt("return");case 4:return P(!0),t.next=7,W(w[0].originFileObj);case 7:return r=t.sent,t.next=10,W(w[1].originFileObj);case 10:o=t.sent,(0,I.Vl)({sourceBase64:r,targetBase64:o,state:B}).then(function(m){P(!1),m.code===1?(j.ZP.success(u.formatMessage({id:"pages.draw.submitSuccess"})),b.add(m.result),F([])):U.error({message:"error",description:m.description})}),t.next=106;break;case 14:if(C!=="show"){t.next=22;break}if(Z){t.next=18;break}return j.ZP.error(u.formatMessage({id:"pages.draw.taskIdNotBlank"})),t.abrupt("return");case 18:b.add(Z),O(""),t.next=106;break;case 22:if(C!=="showjobid"){t.next=30;break}if(Z){t.next=26;break}return j.ZP.error(u.formatMessage({id:"pages.draw.promptNotBlank"})),t.abrupt("return");case 26:P(!0),(0,I.cq)("show",{botType:R,jobId:Z,state:B,accountFilter:{instanceId:G}}).then(function(m){P(!1);var E=X(m);E&&(b.add(m.result),O(""),F([]))}),t.next=106;break;case 30:if(C!=="imagine"){t.next=58;break}if(Z){t.next=34;break}return j.ZP.error(u.formatMessage({id:"pages.draw.promptNotBlank"})),t.abrupt("return");case 34:P(!0),l=[],c=$()(w),t.prev=37,c.s();case 39:if((s=c.n()).done){t.next=47;break}return f=s.value,t.next=43,W(f.originFileObj);case 43:d=t.sent,l.push(d);case 45:t.next=39;break;case 47:t.next=52;break;case 49:t.prev=49,t.t0=t.catch(37),c.e(t.t0);case 52:return t.prev=52,c.f(),t.finish(52);case 55:(0,I.qJ)(C,{botType:R,prompt:Z,base64Array:l,state:B,accountFilter:{instanceId:G}}).then(function(m){P(!1);var E=X(m);E&&(b.add(m.result),O(""),F([]))}),t.next=106;break;case 58:if(C!=="blend"){t.next=86;break}if(!(w.length<2)){t.next=62;break}return j.ZP.error(u.formatMessage({id:"pages.draw.blendTip"})),t.abrupt("return");case 62:P(!0),x=[],p=$()(w),t.prev=65,p.s();case 67:if((h=p.n()).done){t.next=75;break}return y=h.value,t.next=71,W(y.originFileObj);case 71:Q=t.sent,x.push(Q);case 73:t.next=67;break;case 75:t.next=80;break;case 77:t.prev=77,t.t1=t.catch(65),p.e(t.t1);case 80:return t.prev=80,p.f(),t.finish(80);case 83:(0,I.qJ)(C,{botType:R,base64Array:x,dimensions:Ze,state:B,accountFilter:{instanceId:G}}).then(function(m){P(!1);var E=X(m);E&&(b.add(m.result),F([]))}),t.next=106;break;case 86:if(C!=="describe"){t.next=97;break}if(!(w.length<1)){t.next=90;break}return j.ZP.error(u.formatMessage({id:"pages.draw.imageEmptyTip"})),t.abrupt("return");case 90:return P(!0),t.next=93,W(w[0].originFileObj);case 93:S=t.sent,(0,I.qJ)(C,{botType:R,base64:S,state:B,accountFilter:{instanceId:G}}).then(function(m){P(!1);var E=X(m);E&&(b.add(m.result),F([]))}),t.next=106;break;case 97:if(C!=="shorten"){t.next=105;break}if(Z){t.next=101;break}return j.ZP.error(u.formatMessage({id:"pages.draw.promptNotBlank"})),t.abrupt("return");case 101:P(!0),(0,I.qJ)(C,{botType:R,prompt:Z,state:B,accountFilter:{instanceId:G}}).then(function(m){P(!1);var E=X(m);E&&(b.add(m.result),O(""))}),t.next=106;break;case 105:j.ZP.error(u.formatMessage({id:"pages.draw.unsupportedAction"}));case 106:case"end":return t.stop()}},e,null,[[37,49,52,55],[65,77,80,83]])}));return function(){return n.apply(this,arguments)}}(),X=function(e){return e.code===22||e.code===1?(e.code===22?U.warning({message:"warn",description:e.description}):j.ZP.success(u.formatMessage({id:"pages.draw.submitSuccess"})),!0):(U.error({message:"error",description:e.description}),!1)},fr=function(e,r){var o=r.customId,l=e.id,c="".concat(r.emoji," ").concat(r.label);Ae("".concat(l,":").concat(o)),(0,I.qJ)("action",{taskId:l,customId:o,state:B,chooseSameChannel:!0}).then(function(s){if(Ae(""),s.code===22)U.warning({message:"warn",description:s.description}),r.style=3,b.add(s.result);else if(s.code===21){if(r.style=3,Ha("".concat(s.result," ").concat(c)),$a(s.result),Be(s.properties.finalPrompt),Ka(s.properties.remix||!1),o.startsWith("MJ::Inpaint:")){var f="".concat(ze).concat(e.imageUrl),d=new Image;d.src=f,d.onload=function(){Wa(Math.floor(550/d.width*d.height)),Ue(f),H(!0),setTimeout(function(){pr()},300)}}else Ue(""),H(!0);H(!0)}else if(s.code===1){if(r.style=3,s.result){var x=s.result.split(",");x.forEach(function(p){b.add(p)})}j.ZP.success(u.formatMessage({id:"pages.draw.actionSuccess"}))}else U.error({message:"error",description:s.description})})},le=!1,oe=0,ue=0,pr=function(){var e=document.getElementById("canvas");e.width=e.clientWidth,e.height=e.clientHeight;var r=e.getBoundingClientRect(),o=Math.floor(r.left),l=Math.floor(r.top),c=e.getContext("2d");c.fillStyle="blue",e.onmousedown=function(s){oe=s.clientX,ue=s.clientY,le=!0},e.onmousemove=function(s){le===!0&&c.fillRect(oe-o,ue-l,s.clientX-oe,s.clientY-ue)},e.onmouseup=function(){le=!1}},gr=function(){(0,I.el)(ne),H(!1)},mr=function(){var n=J()(T()().mark(function e(){var r,o,l,c;return T()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(Ge(!0),!_){f.next=11;break}return o=document.getElementById("canvas"),l=new Image,l.src=o.toDataURL("image/png"),f.next=7,vr(l);case 7:c=f.sent,r={maskBase64:c,taskId:ne,prompt:q},f.next=12;break;case 11:r={taskId:ne,prompt:q};case 12:(0,I.qJ)("modal",r).then(function(d){Ge(!1),d.code===22?(U.warning({message:"warn",description:d.description}),b.add(d.result),H(!1)):d.code===1?(b.add(d.result),H(!1),j.ZP.success(u.formatMessage({id:"pages.draw.subSuccess"}))):U.error({message:"error",description:d.description})});case 13:case"end":return f.stop()}},e)}));return function(){return n.apply(this,arguments)}}(),vr=function(){var n=J()(T()().mark(function e(r){return T()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,new Promise(function(c){r.onload=function(){var s=r.width,f=r.height,d=document.createElement("canvas"),x=d.getContext("2d");d.width=s,d.height=f,x.drawImage(r,0,0,s,f);for(var p=x.getImageData(0,0,s,f),h=p.data,y=0;y<h.length;y+=4)h[y]!==0||h[y+1]!==0||h[y+2]!==0?(h[y]=parseInt("0xff"),h[y+1]=parseInt("0xff"),h[y+2]=parseInt("0xff")):(h[y]=0,h[y+1]=0,h[y+2]=0,h[y+3]=255);x.putImageData(p,0,0);var Q=d.toDataURL("png");c(Q)}});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},e)}));return function(r){return n.apply(this,arguments)}}(),hr=function(e){var r="Midjourney - ".concat(e.displays.discordInstanceId);return e.botType==="NIJI_JOURNEY"?r="niji\u30FBjourney - ".concat(e.displays.discordInstanceId):e.botType==="INSIGHT_FACE"&&(r="InsightFaceSwap - ".concat(e.displays.discordInstanceId)),e.status!=="SUCCESS"&&e.status!=="FAILURE"&&e.status!=="CANCEL"&&e.action!=="SWAP_FACE"?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:r}),(0,a.jsx)("span",{className:se.cardTitleTime,children:e.displays.submitTime}),(0,a.jsx)(M.ZP,{style:{marginLeft:"10px"},type:"link",shape:"circle",icon:(0,a.jsx)(na.Z,{}),onClick:function(){return(0,I.el)(e.id)}})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:r}),(0,a.jsx)("span",{className:se.cardTitleTime,children:e.displays.submitTime})]})},Sr=function(e){var r=e.description,o=e.properties.messageContent;return o&&(r=o.replace(/<@[^>]+>/g,"")),(0,a.jsx)(ve.U,{children:r})},yr=function(){return Ta.map(function(e){var r="./midjourney.webp";return e.botType==="NIJI_JOURNEY"?r="./niji.webp":e.botType==="INSIGHT_FACE"&&(r="./insightface.webp"),(0,a.jsxs)(K.Z,{bordered:!1,bodyStyle:{backgroundColor:"#eaeaea",marginBottom:"10px"},children:[(0,a.jsx)(va,{avatar:(0,a.jsx)(da.C,{src:r}),title:hr(e),description:Sr(e)}),(0,a.jsxs)(N.Z,{vertical:!0,style:{paddingLeft:"48px"},children:[Cr(e),(0,a.jsx)(L.Z,{wrap:!0,style:{marginTop:"7px"},children:Tr(e)})]})]},e.id)})},Cr=function(e){return e.action==="DESCRIBE"?(0,a.jsxs)(a.Fragment,{children:[de(e)," ",Xe(e)," ",Qe(e.imageUrl,120)]}):e.action==="SHORTEN"?(0,a.jsxs)(a.Fragment,{children:[de(e)," ",Xe(e)]}):(0,a.jsxs)(a.Fragment,{children:[de(e),Qe(e.imageUrl,250)]})},Xe=function(e){if(!e.properties.finalPrompt)return(0,a.jsx)(a.Fragment,{});var r=e.properties.finalPrompt;return(0,a.jsx)(ve.U,{children:r.replace(new RegExp("(?<!\\n)\\n","g"),`

`)})},de=function(e){if(e.status==="FAILURE")return(0,a.jsx)("span",{className:se.taskErrorTip,children:e.failReason});if(e.status==="SUCCESS")return(0,a.jsx)(a.Fragment,{});if(e.status==="IN_PROGRESS")return(0,a.jsx)(a.Fragment,{children:br(e)});var r="purple";return e.status==="SUBMITTED"?r="lime":e.status==="CANCEL"?r="magenta":e.status==="MODAL"&&(r="warning"),(0,a.jsx)("span",{children:(0,a.jsx)(ca.Z,{color:r,children:e.displays.status})})},Qe=function(e,r){return e?(0,a.jsx)(fa.Z,{width:r,src:"".concat(ze).concat(e),placeholder:(0,a.jsx)(pa.Z,{tip:"Loading",size:"large"})}):(0,a.jsx)(a.Fragment,{})},br=function(e){var r=e.progress,o=0;return r&&r.indexOf("%")>0&&(o=parseInt(r.substring(0,r.indexOf("%")))),(0,a.jsx)("span",{style:{width:250},children:(0,a.jsx)(ga.Z,{percent:o,status:"normal"})})},Tr=function(e){return e.buttons.map(function(r){return(0,a.jsxs)(M.ZP,{ghost:!0,style:{backgroundColor:r.style===3?"#258146":"rgb(131 133 142)"},onClick:function(){fr(e,r)},loading:Fa==="".concat(e.id,":").concat(r.customId),children:[r.emoji," ",r.label]},"".concat(e.id,":").concat(r.customId))})},ae=(0,a.jsxs)("div",{children:[(0,a.jsx)(ia.Z,{}),(0,a.jsx)("div",{style:{marginTop:8},children:"Upload"})]}),jr=function(){return R==="INSIGHT_FACE"?(0,a.jsxs)(N.Z,{vertical:!0,children:[(0,a.jsx)(V.Z,k()(k()({},re),{},{listType:"picture-card",children:w.length>=2?null:ae})),(0,a.jsx)(M.ZP,{style:{marginTop:"10px"},type:"primary",onClick:A,loading:D,children:u.formatMessage({id:"pages.draw.swapDesc"})})]}):C==="show"?(0,a.jsxs)(L.Z.Compact,{style:{width:"100%"},children:[(0,a.jsx)(z.Z,{placeholder:u.formatMessage({id:"pages.draw.inputIdShow"}),value:Z,onChange:ee,onPressEnter:A}),(0,a.jsx)(M.ZP,{type:"primary",onClick:A,loading:D,children:u.formatMessage({id:"pages.draw.submitTask"})})]}):C==="showjobid"?(0,a.jsxs)(L.Z.Compact,{style:{width:"100%"},children:[(0,a.jsx)(z.Z,{placeholder:u.formatMessage({id:"pages.draw.inputJobIdShow"}),value:Z,onChange:ee,onPressEnter:A}),(0,a.jsx)(M.ZP,{type:"primary",onClick:A,loading:D,children:u.formatMessage({id:"pages.draw.submitTask"})})]}):C==="imagine"?(0,a.jsxs)(N.Z,{vertical:!0,children:[(0,a.jsx)(V.Z,k()(k()({},re),{},{listType:"picture-card",children:w.length>=5?null:ae})),(0,a.jsxs)(L.Z.Compact,{style:{width:"100%",marginTop:"10px"},children:[(0,a.jsx)(z.Z,{placeholder:"Prompt",value:Z,onChange:ee,onPressEnter:A}),(0,a.jsx)(M.ZP,{type:"primary",onClick:A,loading:D,children:u.formatMessage({id:"pages.draw.submitTask"})})]})]}):C==="blend"?(0,a.jsxs)(N.Z,{vertical:!0,children:[(0,a.jsx)(V.Z,k()(k()({},re),{},{listType:"picture-card",children:w.length>=5?null:ae})),(0,a.jsxs)(L.Z,{style:{width:"100%",marginTop:"10px"},children:[(0,a.jsx)(ge.ZP.Group,{value:Ze,onChange:cr,options:[{value:"PORTRAIT",label:u.formatMessage({id:"pages.draw.PORTRAIT"})},{value:"SQUARE",label:u.formatMessage({id:"pages.draw.SQUARE"})},{value:"LANDSCAPE",label:u.formatMessage({id:"pages.draw.LANDSCAPE"})}],optionType:"button"}),(0,a.jsx)(M.ZP,{type:"primary",onClick:A,loading:D,children:u.formatMessage({id:"pages.draw.submitTask"})})]})]}):C==="describe"?(0,a.jsxs)(N.Z,{vertical:!0,children:[(0,a.jsx)(V.Z,k()(k()({},re),{},{listType:"picture-card",children:w.length>=1?null:ae})),(0,a.jsx)(M.ZP,{style:{marginTop:"10px"},type:"primary",onClick:A,loading:D,children:u.formatMessage({id:"pages.draw.submitTask"})})]}):C==="shorten"?(0,a.jsxs)(L.Z.Compact,{style:{width:"100%",marginTop:"10px"},children:[(0,a.jsx)(z.Z,{placeholder:"Prompt",value:Z,onChange:ee,onPressEnter:A}),(0,a.jsx)(M.ZP,{type:"primary",onClick:A,loading:D,children:u.formatMessage({id:"pages.draw.submitTask"})})]}):(0,a.jsx)(a.Fragment,{})},Ke=function(){var e=document.getElementById("canvas");e.width=e.clientWidth,e.height=e.clientHeight;var r=e.getContext("2d");r.fillStyle="blue"},Ir=function(){return _?Qa?(0,a.jsxs)(N.Z,{vertical:!0,children:[(0,a.jsx)(M.ZP,{style:{marginBottom:"10px"},icon:(0,a.jsx)(pe.Z,{}),onClick:Ke,children:u.formatMessage({id:"pages.draw.clear"})}),(0,a.jsx)("canvas",{style:{backgroundImage:"url('".concat(_,"')"),backgroundSize:"100% 100%"},id:"canvas",width:"550",height:De}),(0,a.jsx)(he,{style:{marginTop:"10px"},rows:2,value:q,onChange:We})]}):(0,a.jsxs)(N.Z,{vertical:!0,children:[(0,a.jsx)(M.ZP,{style:{marginBottom:"10px"},icon:(0,a.jsx)(pe.Z,{}),onClick:Ke,children:u.formatMessage({id:"pages.draw.clear"})}),(0,a.jsx)("canvas",{style:{backgroundImage:"url('".concat(_,"')"),backgroundSize:"100% 100%"},id:"canvas",width:"550",height:De})]}):(0,a.jsx)(he,{rows:3,value:q,onChange:We})};function wr(n){n.onSuccess()}var xr=function(e){var r=e.type==="image/jpeg"||e.type==="image/png";r||j.ZP.error(u.formatMessage({id:"pages.draw.onlyJpgPng"}));var o=e.size/1024/1024<10;return o||j.ZP.error(u.formatMessage({id:"pages.draw.limit10M"})),r&&o||V.Z.LIST_IGNORE},re={customRequest:wr,beforeUpload:xr,fileList:w,onChange:function(e){F(e.fileList)},showUploadList:{showRemoveIcon:!0,showPreviewIcon:!1}},Zr=function(){var e,r=!1;R==="INSIGHT_FACE"?(r=!0,e=[{value:"swap",label:"/swap"}]):e=[{value:"imagine",label:"/imagine"},{value:"blend",label:"/blend"},{value:"describe",label:"/describe"},{value:"shorten",label:"/shorten"},{value:"showjobid",label:"/show job_id"},{value:"show",label:"/show task_id"}];var o=ar.map(function(l){return{value:l.channelId,label:l.channelId+" - "+(l.remark||""),disabled:!l.enable||!l.running}});return(0,a.jsxs)(L.Z,{style:{marginBottom:"10px"},children:[(0,a.jsx)(me.Z,{value:r?"swap":C,style:{width:150},onChange:or,options:e}),(0,a.jsx)(me.Z,{value:G,style:{width:320},onChange:ur,options:o,allowClear:!0,placeholder:u.formatMessage({id:"pages.draw.selectAccount"})}),(0,a.jsx)(ge.ZP.Group,{value:R,onChange:dr,options:[{value:"MID_JOURNEY",label:"Midjourney"},{value:"NIJI_JOURNEY",label:"niji\u30FBjourney"},{value:"INSIGHT_FACE",label:"InsightFace"}],optionType:"button"})]})};return(0,a.jsxs)(la._z,{children:[Ca,(0,a.jsx)(K.Z,{style:{marginBottom:"15px",overflow:"auto",height:"70vh"},loading:Ia,id:"task-panel",children:yr()}),(0,a.jsxs)(K.Z,{children:[Zr(),jr()]}),(0,a.jsx)(ma.Z,{title:Ja,open:Oa,onCancel:gr,onOk:mr,confirmLoading:_a,width:600,children:Ir()})]})},Sa=ha}}]);
